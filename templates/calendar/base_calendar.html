{% extends 'application/dashboard.html' %}

{% block title %}Calendar{% endblock %}

{% block content %}
    <div id='calendar'></div>
    <a href="{% url 'add_event' %}">Add Event</a>
    {% for event in events %}
        <p>{{ event.title }} - {{ event.start_datetime }} - {{ event.end_datetime }}</p>
        <a href="{% url 'delete_event' event.id %}">Delete Event</a>
    {% endfor %}

    {% for academic_event in academic_events %}
        <p>{{ academic_event.date }} - {{ academic_event.title }} - {{ academic_event.location }}</p>
    {% endfor %}

    {% for conference in conferences %}
        <div>{{ conference.name }} - {{ conference.date }} at {{ conference.location }}</div>
        <p>{{ conference.description }}</p>
    {% endfor %}

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                events: [
                    {% for event in events %}
                    {
                        title: "{{ event.title }}",
                        start: "{{ event.start_datetime|date:'Y-m-dTH:i:s' }}",
                        end: "{{ event.end_datetime|date:'Y-m-dTH:i:s' }}",
                    },
                    {% endfor %}
                ]
            });

            calendar.render();
        });
    </script>
{% endblock %}
